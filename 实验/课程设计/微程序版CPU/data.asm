ORG 0000H 

	;0
	DB	00000001B ;HLT
	DB	01000100B ;IN R1
	DB	01101001B ;MOV R2,R1
	DB	01100001B ;MOV R0,R1
	DB	11010100B ;ADD R1,80H
	DB	80H ;
	
	;6
	DB	11000000B ;SUB R0,IMM
	DB	03H ;
	
	DB	00011100B ;JS []
	DB	00001101B ;13
	
	DB	01101000B ;MOV R2,R0
	DB	00010000B ;JMP
	DB	00000110B ;6
	
	;13
	;判断是否是0
	DB	11001000B ;SUB R2,IMM
	DB	00H ;
	DB	00011000B ;JZ 
	DB	01011010B ;90
	
	;判断是否是1
	DB	11001000B ;SUB R2,IMM
	DB	01H ;
	DB	00011000B ;JZ 
	DB	01100111B ;103 
	
	;21
	;执行加法
	;计数器
	DB	00111100B ;SET R3,06H
	DB	00000110B ;
	DB	10011100B ;STO R3,[FCH]
	DB	11111100B ;
	;存储输入地址
	DB	11010100B ;ADD R1,05H
	DB	00000101B ;
	DB	10010100B ;STO R1,[FDH]
	DB	11111101B ;
	
	;29
	;获取学号地址
	DB	00110100B ;SET R1,115
	DB	01110011B ;115
	DB	11010111B ;ADD R1,R3
	;获取一位学号
	DB	10000001B ;POP R0,[R1]
	;获取身份证号地址
	DB	00111000B ;SET R2,121
	DB	01111001B ;121
	DB	11011011B ;ADD R2,R3
	;获取一位身份证号
	DB	10000110B ;POP R1,[R2]
	DB	01101000B ;MOV R2,R0
	DB	01101101B ;MOV R3,R1
	
	;39
	;计算低四位
	DB	11100000B ;ANDI R0,0FH
	DB	0FH ;
	DB	11100100B ;ANDI R1,0FH
	DB	0FH ;
	;计算高四位
	DB	11101000B ;ANDI R2,F0H
	DB	11110000B ;
	DB	11101100B ;ANDI R3,F0H
	DB	11110000B ;
	
	;47
	;处理低四位相加
	DB	11010001B ;ADD R0,R1
	DB	01100100B ;MOV R1,R0
	DB	11010000B ;ADDI R0,11110110
	DB	11110110B ;
	DB	00010100B ;JC []
	DB	01000110B ;70
	
	;53
	;处理高四位相加
	DB	11011011B ;ADD R2,R3
	DB	11010110B ;ADD R1,R2
	
	;55
	;获取输出地址
	DB	10001100B ;LAD R3,[FDH]
	DB	11111101B ;
	;存储计算结果
	DB	10010111B ;PUSH R1,[R3]
	;递减并存储输出地址
	DB	00101101B ;DEC R3
	DB	10011100B ;STO R3,[FDH]
	DB	11111101B ;
	;得到计数器，判断循环条件
	DB	10001100B ;LAD R3,[FCH]
	DB	11111100B ;
	DB	00101101B ;DEC R3
	DB	00011000B ;JZ []
	DB	01001100B ;76
	
	DB	10011100B ;STO R3,[FCH]
	DB	11111100B ;
	DB	00010000B ;JUMP []
	DB	00011101B ;29
	
	;70
	;低位进位
	DB	11000100B ;SUBI R1,0AH
	DB	00001010B ;
	DB	11011000B ;ADDI R2,00010000
	DB	00010000B ;
	DB	00010000B ;JUMP []
	DB	00110101B ;53
	
	;76
	;循环Dout
	DB	00110000B ;SET R0,06H
	DB	00000110B ;
	DB	10000100B ;LAD R1,[FDH]
	DB	11111101B ;
	DB	00100100B ;INC R1
	
	;81
	DB	10001001B ;POP R2,[R1]
	DB	00000001B ;HLT
	DB	01011000B ;OUT R2,PORT0
	DB	00100100B ;INC R1
	DB	00100001B ;DEC R0
	DB	00011000B ;JZ []
	DB	00000000B
	DB	00010000B ;JUMP []
	DB	01010001B ;81
	
	
	;90
	;写入学号
	;设置计数器
	DB	00111100B ;SET R3,06H
	DB	00000110B ;
	DB	00111000B ;SET R2,116
	DB	01110100B ;
	;94
	DB	10000010B ;POP R0,[R2]
	DB	00101000B ;INC R2
	DB	10010001B ;PUSH R0,[R1]
	DB	00100100B ;INC R1
	DB	00101101B ;DEC R3
	DB	00011000B ;JZ []
	DB	00000000B
	DB	00010000B ;JUMP []
	DB	01011110B ;94
	
	;写入身份证号
	;103
	DB	00111100B ;SET R3,06H
	DB	00000110B ;
	DB	00111000B ;SET R2,122
	DB	01111010B ;
	;107
	DB	10000010B ;POP R0,[R2]
	DB	00101000B ;INC R2
	DB	10010001B ;PUSH R0,[R1]
	DB	00100100B ;INC R1
	DB	00101101B ;DEC R3
	DB	00011000B ;JZ []
	DB	00000000B
	DB	00010000B ;JUMP []
	DB	01101011B ;107
	
	
	;116
	DB 20H 
	DB 18H 
	DB 30H 
	DB 58H 
	DB 21H 
	DB 80H 
	;122
	DB 20H 
	DB 00H 
	DB 06H 
	DB 23H 
	DB 34H 
	DB 16H 
END

















